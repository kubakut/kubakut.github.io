L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,options:{closeButton:!0,position:"left",autoPan:!0},initialize:function(t,o){L.setOptions(this,o);var i=this._contentContainer=L.DomUtil.get(t);i.parentNode.removeChild(i);var e="leaflet-",n=this._container=L.DomUtil.create("div",e+"sidebar "+this.options.position);if(L.DomUtil.addClass(i,e+"control"),n.appendChild(i),this.options.closeButton){var l=this._closeButton=L.DomUtil.create("a","close",n);l.innerHTML="&times;"}},addTo:function(t){var o=this._container,i=this._contentContainer;if(this.options.closeButton){var e=this._closeButton;L.DomEvent.on(e,"click",this.hide,this)}L.DomEvent.on(o,"transitionend",this._handleTransitionEvent,this).on(o,"webkitTransitionEnd",this._handleTransitionEvent,this);var n=t._controlContainer;n.insertBefore(o,n.firstChild),this._map=t;var l=L.DomEvent.stopPropagation;return L.DomEvent.on(i,"click",l).on(i,"mousedown",l).on(i,"touchstart",l).on(i,"dblclick",l).on(i,"mousewheel",l).on(i,"MozMousePixelScroll",l),this},removeFrom:function(t){this.hide();var o=this._contentContainer,i=t._controlContainer;i.removeChild(this._container),this._map=null;var e=L.DomEvent.stopPropagation;if(L.DomEvent.off(o,"click",e).off(o,"mousedown",e).off(o,"touchstart",e).off(o,"dblclick",e).off(o,"mousewheel",e).off(o,"MozMousePixelScroll",e),L.DomEvent.off(container,"transitionend",this._handleTransitionEvent,this).off(container,"webkitTransitionEnd",this._handleTransitionEvent,this),this._closeButton&&this._close){var n=this._closeButton;L.DomEvent.off(n,"click",this.hide,this)}return this},isVisible:function(){return L.DomUtil.hasClass(this._container,"visible")},show:function(){this.isVisible()||(L.DomUtil.addClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([-this.getOffset()/2,0],{duration:.5}),this.fire("show"))},hide:function(t){this.isVisible()&&(L.DomUtil.removeClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([this.getOffset()/2,0],{duration:.5}),this.fire("hide")),t&&L.DomEvent.stopPropagation(t)},toggle:function(){this.isVisible()?this.hide():this.show()},getContainer:function(){return this._contentContainer},getCloseButton:function(){return this._closeButton},setContent:function(t){return this.getContainer().innerHTML=t,this},getOffset:function(){return"right"===this.options.position?-this._container.offsetWidth:this._container.offsetWidth},_handleTransitionEvent:function(t){("left"==t.propertyName||"right"==t.propertyName)&&this.fire(this.isVisible()?"shown":"hidden")}}),L.control.sidebar=function(t,o){return new L.Control.Sidebar(t,o)};